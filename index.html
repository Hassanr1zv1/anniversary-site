<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Anniversary 💖</title>
  <style>
    :root {
      --bg: #fff5f7;
      --card: #ffffff;
      --ink: #1f2937;
      --accent: #ff4d6d;
      --accent-2: #ff8fab;
      --ring: #ffd6e0;
      --muted: #6b7280;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial,
      "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; color: var(--ink); background: linear-gradient(120deg, #fff0f6, #fdf2f8, #fff5f7);
      background-attachment: fixed;
    }

    .container { max-width: 980px; margin: 0 auto; padding: 20px; }
    .card { background: var(--card); border-radius: 20px; box-shadow: 0 10px 30px rgba(255, 77, 109, .15); padding: 24px; }
    .center { text-align: center; }
    .btn {
      display: inline-block; padding: 12px 20px; border-radius: 999px; border: none; cursor: pointer;
      background: linear-gradient(90deg, var(--accent), var(--accent-2)); color: white; font-weight: 700; letter-spacing: .3px;
      transition: transform .08s ease, box-shadow .2s ease; box-shadow: 0 10px 20px rgba(255, 77, 109, .35);
    }
    .btn:hover { transform: translateY(-2px); }
    .btn:active { transform: translateY(0px) scale(.98); }

    header.hero { padding: 60px 0 20px; position: relative; overflow: hidden; }
    .hearts-bg { position: absolute; inset: 0; pointer-events: none; opacity: .08; background-image:
      radial-gradient(circle at 20% 30%, #ff4d6d 2px, transparent 3px),
      radial-gradient(circle at 80% 20%, #ff4d6d 2px, transparent 3px),
      radial-gradient(circle at 60% 80%, #ff4d6d 2px, transparent 3px),
      radial-gradient(circle at 30% 70%, #ff4d6d 2px, transparent 3px);
      background-size: 120px 120px;
      animation: float 16s linear infinite;
    }
    @keyframes float { from { background-position: 0 0, 120px 0, 0 120px, 120px 120px; } to { background-position: 0 120px, 120px 120px, 0 240px, 120px 240px; } }

    h1 { font-size: clamp(28px, 3.5vw, 48px); margin: 10px 0 6px; }
    h2 { font-size: clamp(20px, 2.5vw, 28px); margin: 0 0 12px; }
    p.lead { color: var(--muted); font-size: clamp(14px, 1.8vw, 18px); }

    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 768px) { .grid { grid-template-columns: repeat(2, 1fr); } }

    .q-card { border: 2px solid var(--ring); transition: border-color .2s ease, transform .08s ease; }
    .option { display: block; padding: 12px 14px; border-radius: 12px; border: 1.5px solid #ffe3ea; margin: 8px 0; cursor: pointer; background: #fff9fb; }
    .option:hover { border-color: var(--accent-2); }
    .option input { display:none; }

    .progress { height: 10px; background: #ffe3ea; border-radius: 999px; overflow: hidden; }
    .progress > div { height: 100%; width: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .3s ease; }

    .pill { background: #fff0f5; padding: 6px 12px; border-radius: 999px; display: inline-block; font-size: 12px; color: #b91c1c; border: 1px solid #ffd6e0; }

    .hidden { display: none; }

    /* Confetti Canvas */
    #confetti { position: fixed; inset: 0; pointer-events: none; z-index: 50; }

    footer { text-align:center; color: #a1a1aa; font-size: 12px; padding: 40px 0; }

    .type { border-right: 2px solid rgba(0,0,0,.2); white-space: nowrap; overflow: hidden; display: inline-block; }
  </style>
</head>
<body>
<canvas id="confetti"></canvas>
<header class="hero">
  <div class="hearts-bg"></div>
  <div class="container center">
    <span class="pill" id="annivLabel">Happy Anniversary</span>
    <h1><span class="type" id="titleType"></span> 💞</h1>
    <p class="lead" id="subtitle">A tiny website, made just for you.</p>
    <button class="btn" id="startBtn">Start the Surprise ✨</button>
  </div>
</header>

<main class="container">
  <section id="quiz" class="card q-card hidden">
    <h2>Mini Love Quiz 💘</h2>
    <p class="lead" id="quizLead">Let’s see how well we know our story!</p>

    <div class="progress"><div id="bar"></div></div>
    <div id="qWrap" style="margin-top:14px"></div>

    <div style="display:flex; gap:10px; margin-top:10px">
      <button class="btn" id="prevBtn">Back</button>
      <button class="btn" id="nextBtn">Next</button>
    </div>
  </section>

  <section id="meter" class="card hidden" style="margin-top:16px">
    <h2>Love Meter 💓</h2>
    <p class="lead">Drag to reveal the surprise message.</p>
    <input id="range" type="range" min="0" max="100" value="0" style="width:100%" />
    <p id="rangeMsg" style="font-weight:700; margin-top:10px">0% — just warming up...</p>
  </section>

  <section id="memories" class="card hidden" style="margin-top:16px">
    <h2>Three Little Memories 📸</h2>
    <div class="grid" id="memGrid"></div>
  </section>

  <section id="letter" class="card hidden" style="margin-top:16px">
    <h2>For You, From Me ✍️</h2>
    <p id="finalLetter" style="line-height:1.7"></p>
    <div class="center" style="margin-top:10px"><button class="btn" id="replay">Replay Confetti 🎉</button></div>
  </section>
</main>

<footer>
  Made with ❤️ by <span id="byName"></span>
</footer>

<script>
  // ============================
  // PERSONALIZE THESE SETTINGS ⬇
  // ============================
  const SETTINGS = {
    yourName: "You",                 // Your name
    partnerName: "My Love",          // Her name
    yearsTogether: 1,                // Years completed
    anniversaryDate: "1 Aug 2025",   // For the label

    // Quiz questions (edit freely)
    questions: [
      {
        q: "Where did our first memorable chat happen?",
        options: ["Instagram DMs", "WhatsApp", "In person", "A random call"],
        correctIndex: 1
      },
      {
        q: "Our go-to comfort food?",
        options: ["Biryani", "Pizza", "Pasta", "Burgers"],
        correctIndex: 0
      },
      {
        q: "Which song feels like 'us'?",
        options: ["Perfect", "Tu Jaane Na", "Until I Found You", "Tera Ban Jaunga"],
        correctIndex: 2
      },
      {
        q: "Ideal date vibe?",
        options: ["Long walk", "Movie night", "Coffee date", "Stargazing"],
        correctIndex: 3
      }
    ],

    // Three memory cards
    memories: [
      { title: "The First 'Hi'", text: "That tiny hello that changed everything." },
      { title: "Inside Joke", text: "You say it, I laugh before you finish." },
      { title: "Future Plan", text: "More sunsets, more hand-holds, more us." }
    ],

    // Final letter (you can use 
 for new lines)
    letter: `My dearest {{partner}},

Happy Anniversary! We’ve shared laughs, late-night talks, and quiet moments that mean everything to me. Every day with you feels like the best part of my story. Thank you for choosing me, for trusting me, and for being beautifully you.

I promise more patience, more care, and more silly jokes that make you roll your eyes. Here’s to countless tomorrows—hand in hand, heart to heart.

Forever yours,
{{you}}`
  };

  // ============================
  // END OF SETTINGS
  // ============================

  // Helper: typewriter effect
  function typewrite(el, text, speed=60) {
    el.textContent = ""; let i = 0;
    const tick = () => { if (i <= text.length) { el.textContent = text.slice(0, i++); setTimeout(tick, speed); } };
    tick();
  }

  // Confetti (lightweight)
  const confetti = (function() {
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W, H, pieces = [], running = false, rafId = null;

    function resize(){ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; }
    window.addEventListener('resize', resize); resize();

    function spawn(n=150){
      pieces = Array.from({length:n}).map(()=>({
        x: Math.random()*W,
        y: -10 - Math.random()*H,
        r: 4 + Math.random()*6,
        c: `hsl(${Math.floor(330+Math.random()*40)}, 90%, ${60+Math.random()*20}%)`,
        vx: -1 + Math.random()*2,
        vy: 2 + Math.random()*3,
        rot: Math.random()*Math.PI,
        vr: -0.05 + Math.random()*0.1
      }));
    }

    function draw(){
      const dpr = window.devicePixelRatio || 1;
      if (canvas.width !== window.innerWidth * dpr || canvas.height !== window.innerHeight * dpr) {
        canvas.width = window.innerWidth * dpr;
        canvas.height = window.innerHeight * dpr;
        ctx.scale(dpr, dpr);
      }
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(const p of pieces){
        ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rot);
        ctx.fillStyle = p.c; ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
        ctx.restore();
        p.x += p.vx; p.y += p.vy; p.rot += p.vr;
        if(p.y > (window.innerHeight + 20)) { p.y = -10; p.x = Math.random()*window.innerWidth; }
      }
      rafId = requestAnimationFrame(draw);
    }

    function start(){ spawn(); if(!running){ running = true; draw(); setTimeout(stop, 2500); } }
    function stop(){ running = false; if(rafId) cancelAnimationFrame(rafId); const ctx2 = canvas.getContext('2d'); ctx2.clearRect(0,0,canvas.width,canvas.height); }

    return { start };
  })();

  // Initialize UI text
  const titleType = document.getElementById('titleType');
  const subtitle = document.getElementById('subtitle');
  const annivLabel = document.getElementById('annivLabel');
  const byName = document.getElementById('byName');

  annivLabel.textContent = `Happy ${SETTINGS.yearsTogether} Year${SETTINGS.yearsTogether>1?'s':''} Anniversary — ${SETTINGS.anniversaryDate}`;
  byName.textContent = SETTINGS.yourName;
  typewrite(titleType, `${SETTINGS.partnerName}, this is for you`);

  const startBtn = document.getElementById('startBtn');
  const quizSec = document.getElementById('quiz');
  const meterSec = document.getElementById('meter');
  const memSec = document.getElementById('memories');
  const letterSec = document.getElementById('letter');

  startBtn.addEventListener('click', () => {
    confetti.start();
    startBtn.disabled = true; startBtn.textContent = 'Enjoy 💗';
    subtitle.textContent = "Answer a few tiny questions…";
    quizSec.classList.remove('hidden');
    renderQuestion();
  });

  // Quiz logic
  let index = 0; const answers = [];
  const bar = document.getElementById('bar');
  const qWrap = document.getElementById('qWrap');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');

  function renderQuestion(){
    const total = SETTINGS.questions.length;
    const current = SETTINGS.questions[index];
    bar.style.width = `${(index/total)*100}%`;

    qWrap.innerHTML = `
      <div class="card" style="background:#fff7fa; border-radius:14px; padding:14px">
        <div style="font-weight:700; margin-bottom:6px">Q${index+1} of ${total}</div>
        <div style="font-size:18px;">${current.q}</div>
      </div>
    `;

    current.options.forEach((opt, i) => {
      const id = `opt-${index}-${i}`;
      const div = document.createElement('label');
      div.className = 'option';
      div.innerHTML = `<input type="radio" name="q${index}" id="${id}" value="${i}"> ${opt}`;
      div.addEventListener('click', () => { answers[index] = i; });
      qWrap.appendChild(div);
    });

    prevBtn.disabled = index === 0;
    nextBtn.textContent = index === total - 1 ? 'Finish' : 'Next';
  }

  nextBtn.addEventListener('click', () => {
    if (typeof answers[index] === 'undefined') { shake(qWrap); return; }
    if (index < SETTINGS.questions.length - 1) {
      index++; renderQuestion();
    } else {
      bar.style.width = '100%';
      showResults();
    }
  });
  prevBtn.addEventListener('click', () => { if(index>0){ index--; renderQuestion(); } });

  function shake(el){ el.style.transform = 'translateX(0)'; el.animate([{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}], {duration: 180}); }

  function showResults(){
    // Score
    const correct = SETTINGS.questions.reduce((acc, q, i)=> acc + (answers[i] === q.correctIndex ? 1 : 0), 0);
    qWrap.innerHTML = `
      <div class="center" style="padding:6px 0 2px"><div class="pill">Score: ${correct}/${SETTINGS.questions.length}</div></div>
      <p class="lead" style="text-align:center">No matter the score, you’re my 100%. Ready for the next surprise?</p>
    `;
    nextBtn.style.display = 'none'; prevBtn.style.display = 'none';

    setTimeout(()=>{
      meterSec.classList.remove('hidden');
      memSec.classList.remove('hidden');
      letterSec.classList.remove('hidden');
      confetti.start();
    }, 800);
  }

  // Love meter
  const range = document.getElementById('range');
  const rangeMsg = document.getElementById('rangeMsg');
  const messages = [
    '0% — just warming up...',
    '30% — butterflies incoming…',
    '60% — smiles unlocked 😊',
    '90% — almost there!',
    '100% — I love you more than words!'
  ];
  range.addEventListener('input', e => {
    const v = +e.target.value;
    let txt = messages[0];
    if (v >= 100) { txt = messages[4]; confetti.start(); }
    else if (v >= 90) txt = messages[3];
    else if (v >= 60) txt = messages[2];
    else if (v >= 30) txt = messages[1];
    rangeMsg.textContent = `${v}% — ${txt.split('—')[1] || txt}`;
  });

  // Memories grid
  const memGrid = document.getElementById('memGrid');
  SETTINGS.memories.forEach((m, i) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <h3 style="margin:0 0 8px">${m.title}</h3>
      <p class="lead" style="margin:0 0 10px">${m.text}</p>
      <button class="btn">Reveal 💝</button>
    `;
    const btn = card.querySelector('button');
    btn.addEventListener('click', () => {
      btn.disabled = true; btn.textContent = '💖'; confetti.start();
      const note = document.createElement('p');
      note.textContent = [
        'You make ordinary days feel like festivals.',
        'If I get a lifetime, I’ll spend it loving you.',
        'My favorite place is any place next to you.'
      ][i % 3];
      note.style.fontWeight = '700'; note.style.marginTop = '8px';
      card.appendChild(note);
    });
    memGrid.appendChild(card);
  });

  // Letter
  const finalLetter = document.getElementById('finalLetter');
  const letterTxt = SETTINGS.letter.replaceAll('{{partner}}', SETTINGS.partnerName).replaceAll('{{you}}', SETTINGS.yourName).split('\n').map(p=>`<span>${p}</span>`).join('<br/>');
  finalLetter.innerHTML = letterTxt;

  // Replay confetti
  document.getElementById('replay').addEventListener('click', ()=> confetti.start());
</script>
</body>
</html>
